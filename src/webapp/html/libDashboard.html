<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Book Catalog</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <header id="home" class="header">
      <nav class="nav" role="navigation">
        <div class="container nav-elements">
          <ul class="navbar">
            <li><a href="libDashboard.html">Dashboard</a></li>
            <li><a href="addBook.html">Add New Book</a></li>
            <li><a href="logout.html">Logout</a></li>
          </ul>
        </div>
      </nav>
    </header>
    <div class="container mt-5">
      <h1 class="display-5 text-center text-primary mb-5">Welcome Librarian</h1>
      <div class="mb-4">
        <form id="searchForm" class="form-inline">
          <div class="form-group mr-3">
            <input
              type="text"
              class="form-control"
              id="searchString"
              placeholder="Search..."
            />
          </div>
          <div class="form-group">
            <div class="form-check form-check-inline">
              <input
                class="form-check-input"
                type="radio"
                name="searchType"
                id="searchByTitle"
                value="book_name"
                checked
              />
              <label class="form-check-label" for="searchByTitle"
                >Search by Title</label
              >
            </div>
            <div class="form-check form-check-inline">
              <input
                class="form-check-input"
                type="radio"
                name="searchType"
                id="searchByAuthor"
                value="author_id"
              />
              <label class="form-check-label" for="searchByAuthor"
                >Search by Author</label
              >
            </div>
          </div>
          <button type="button" onclick="searchBooks()" class="btn btn-primary">
            Search
          </button>
        </form>
      </div>
      <h2 class="mb-4">Book Catalog</h2>
      <div class="row" id="bookCatalog"></div>
      <ul class="pagination" id="pagination"></ul>
    </div>

    <!-- Bootstrap JS and Popper.js (Optional) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
      var sampleBooks = [
        {
          bookName: "Book 1",
          authorName: "Author 1",
          genre: "Genre 1",
          bookId: 1,
        },
        {
          bookName: "Book 2",
          authorName: "Author 2",
          genre: "Genre 2",
          bookId: 2,
        },
        // Add more books as needed
      ];
      renderBooks(sampleBooks);
      renderPagination(12, 1);
      function searchBooks() {
        const searchString = document.getElementById("searchString").value;
        const searchType = document.querySelector(
          'input[name="searchType"]:checked'
        ).value;

        // You can perform additional validation here if needed

        // Example: Sending data to server using fetch
        fetch(
          `searchBooks?searchString=${searchString}&searchType=${searchType}`
        )
          .then((response) => response.json())
          .then((data) => {
            // Handle the response from the server
          })
          .catch((error) => {
            console.error("Error:", error);
          });
      }

      function renderBooks(books) {
        const bookCatalog = document.getElementById("bookCatalog");
        bookCatalog.innerHTML = ""; // Clear existing content

        books.forEach((book) => {
          const card = document.createElement("div");
          card.className = "col-md-4 mb-4";
          card.innerHTML = `
          <div class="card">
            <img src="book.png" class="card-img-top" alt="/images/book.png" style="width: 128px; height: 128px;">
            <div class="card-body">
              <h5 class="card-title">${book.bookName}</h5>
              <p class="card-text">
                <strong>Author:</strong> ${book.authorName}
              </p>
              <p class="card-text">
                <strong>Genre:</strong> ${book.genre}
              </p>
              <a href="bookDetails?bookId=${book.bookId}" class="btn btn-primary">View Details</a>
            </div>
          </div>
        `;

          bookCatalog.appendChild(card);
        });
      }

      function renderPagination(totalPages, currentPage) {
        const pagination = document.getElementById("pagination");
        pagination.innerHTML = ""; // Clear existing content

        for (let pageNum = 1; pageNum <= totalPages; pageNum++) {
          const li = document.createElement("li");
          li.className = `page-item ${pageNum === currentPage ? "active" : ""}`;
          li.innerHTML = `<a class="page-link" href="?page=${pageNum}">${pageNum}</a>`;
          pagination.appendChild(li);
        }
      }
    </script>
  </body>
</html>
